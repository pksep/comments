# 2. Modular Architecture

* Date: 2025-09-11
* Status: Accepted
* Deciders: Denis, Igor, David
* Tags: architecture, structure, modules

## Контекст и постановка проблемы (Context and Problem Statement)

Нам необходимо было организовать кодовую базу таким образом, чтобы она оставалась масштабируемой и поддерживаемой по мере роста проекта. Основные требования:

1. Чёткое разделение ответственности (Clear separation of concerns)
2. Простота добавления новых функций
3. Независимая разработка различных частей системы
4. Возможность повторного использования компонентов

## Факторы решения (Decision Drivers)

* Необходимость чётких границ между разными частями системы
* Желание независимой разработки функций
* Необходимость повторного использования кода в приложении
* Простота тестирования

## Рассмотренные варианты (Considered Options)

* Плоская структура (все обработчики, модели и т.д. в отдельных директориях)
* Предметно-ориентированное проектирование (DDD) с ограниченными контекстами
* Функционально-ориентированные модули

## Принятое решение (Decision Outcome)

Выбранный вариант: "Функционально-ориентированные модули" со следующей структурой:

```
internal/
  modules/
    {module_name}/
      api/         # HTTP handlers, DTOs, validation
      model/       # Domain models
      repository/  # Database operations
      service/     # Business logic (if needed)
```

### Положительные последствия (Positive Consequences)

* Чёткое разделение ответственности
* Простота добавления новых функций в виде независимых модулей
* Лучшая организация кода и удобство навигации
* Более простое тестирование изолированных компонентов

### Отрицательные последствия (Negative Consequences)

* Немного более сложная структура файлов
* Необходимость тщательно управлять зависимостями между модулями

## Плюсы и минусы вариантов (Pros and Cons of the Options)

### [option 1] Плоская структура (Flat structure)

* Хорошо, потому что проста для понимания
* Плохо, потому что плохо масштабируется при увеличении количества функций
* Плохо, потому что может привести к сильной связанности компонентов

### [option 2] Предметно-ориентированное проектирование (DDD)

* Хорошо, потому что хорошо отражает предметную область
* Хорошо, потому что обеспечивает чёткие границы
* Плохо, потому что может быть избыточным для более простых приложений

### [option 3] Функционально-ориентированные модули (выбрано)

* Хорошо, потому что просто и хорошо масштабируется
* Хорошо, потому что сохраняет связанный код вместе
* Хорошо, потому что легко понимать и ориентироваться
* Плохо, потому что требует дисциплины для поддержания чётких границ модулей